<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAF Tech - Demo for SRS Preparation</title>
    <meta name="description" content="Common Template">
    <!-- jsPDF Library for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
:root{
  --headerH: 0px;
  --footerH: 60px;
  --sidebarW: 280px;
}

header, nav { position: relative; z-index: 1100; }

/* Form Layout Styles */
.form-container {
  display: flex;
  gap: 0.5rem;
  height: auto;
  padding: 0.25rem;
  overflow: visible;
}

.form-section {
  flex: 1;
  transition: width 0.3s ease;
  overflow: visible;
  height: auto;
  max-height: none;
}

.form-section.compact {
  width: 50%;
  flex: 0 0 50%;
}

.preview-section {
  width: 50%;
  flex: 0 0 50%;
  transition: all 0.3s ease;
  overflow: visible;
  height: auto;
  max-height: none;
}

.preview-section.hidden {
  display: none;
}

/* Form field sizing */
.form-input {
  font-size: 0.75rem;
  padding: 0.375rem 0.5rem;
}

.form-label {
  font-size: 0.75rem;
  font-weight: 500;
}

/* Compact form styling */
.compact-form .mb-6 {
  margin-bottom: 1rem;
}

.compact-form .mb-4 {
  margin-bottom: 0.75rem;
}

.compact-form .mb-3 {
  margin-bottom: 0.5rem;
}

.compact-form .mb-1 {
  margin-bottom: 0.25rem;
}

.compact-form .gap-4 {
  gap: 0.75rem;
}

.compact-form .gap-3 {
  gap: 0.5rem;
}

.compact-form .gap-2 {
  gap: 0.5rem;
}

.compact-form .p-3 {
  padding: 0.75rem;
}

.compact-form .p-4 {
  padding: 1rem;
}

/* Enhanced Form field styling */
.form-field-container {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
}

.form-field-container label {
  font-size: 0.7rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 0.125rem;
  letter-spacing: 0.025em;
  transition: color 0.2s ease;
  line-height: 1.2;
}

.form-field-container input,
.form-field-container select,
.form-field-container textarea {
  border: 2px solid #e5e7eb;
  border-radius: 0.5rem;
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  background: #ffffff;
  color: #374151;
  width: 100%;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.form-field-container input:hover,
.form-field-container select:hover,
.form-field-container textarea:hover {
  border-color: #9ca3af;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.form-field-container input:focus,
.form-field-container select:focus,
.form-field-container textarea:focus {
  outline: none;
  border-color: #be1e2d;
  box-shadow: 0 0 0 4px rgba(190, 30, 45, 0.15);
  transform: translateY(-1px);
}

.form-field-container input::placeholder,
.form-field-container textarea::placeholder {
  color: #9ca3af;
  font-style: italic;
}

/* Enhanced Upload button styling */
.upload-btn {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  background: linear-gradient(135deg, #be1e2d 0%, #9e1825 100%);
  border: none;
  border-radius: 0.5rem;
  padding: 0.5rem 0.75rem;
  font-weight: 600;
  letter-spacing: 0.025em;
  position: relative;
  overflow: hidden;
  white-space: nowrap;
}

.upload-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.upload-btn:hover::before {
  left: 100%;
}

.upload-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(190, 30, 45, 0.3);
  background: linear-gradient(135deg, #9e1825 0%, #7e141e 100%);
}

.upload-btn:active {
  transform: translateY(0);
}

/* Upload section enhancements */
.upload-section {
  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  border: 2px solid #e2e8f0;
  border-radius: 1rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
}

.upload-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #10b981 0%, #059669 50%, #10b981 100%);
}

/* Upload field specific styling */
.upload-field {
  width: 100%;
  max-width: 250px;
}

#fileDisplay {
  width: 100%;
  max-width: 200px;
}

/* Compact form field widths */
.compact-form input,
.compact-form select,
.compact-form textarea {
  width: 100%;
  max-width: 120px;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
}

.compact-form textarea {
  max-width: 100%;
  padding: 0.25rem 0.5rem;
}

/* Enhanced Accordion Form Styling */
.accordion-section {
  margin-bottom: 0.5rem;
  border: 1px solid #e2e8f0;
  border-radius: 0.5rem;
  overflow: hidden;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
}

.accordion-section:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  border-color: #cbd5e1;
}

.accordion-header {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  padding: 0.5rem 0.75rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 2px solid #e2e8f0;
  transition: all 0.3s ease;
  position: relative;
}

.accordion-header:hover {
  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
}

.accordion-header h3 {
  margin: 0;
  color: #1e293b;
  font-size: 1.1rem;
  font-weight: 700;
  letter-spacing: 0.025em;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.accordion-header h3::before {
  content: '';
  width: 4px;
  height: 24px;
  background: linear-gradient(135deg, #be1e2d 0%, #9e1825 100%);
  border-radius: 0.25rem;
}

.accordion-toggle {
  background: none;
  border: none;
  color: #64748b;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 0.375rem;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
}

.accordion-toggle:hover {
  background: #e2e8f0;
  color: #374151;
  transform: scale(1.1);
}

.accordion-toggle.active {
  transform: rotate(180deg);
  color: #be1e2d;
}

.accordion-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  background: white;
}

.accordion-content.expanded {
  max-height: 2000px;
  padding: 0.5rem;
}

.accordion-content.collapsed {
  max-height: 0;
  padding: 0 0.5rem;
}

/* Accordion section indicators */
.accordion-section[data-section="personal"] .accordion-header h3::before {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.accordion-section[data-section="additional"] .accordion-header h3::before {
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
}

/* Form container enhancements */
.compact-form {
  background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
  border-radius: 1rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  border: 1px solid #f1f5f9;
  overflow: visible;
}

/* Enhanced Action Buttons */
.action-buttons {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border-top: 1px solid #e2e8f0;
  padding: 0.75rem;
  border-radius: 0 0 1rem 1rem;
  display: flex;
  gap: 0.75rem;
  align-items: center;
  justify-content: flex-start;
}

.action-btn {
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-weight: 600;
  letter-spacing: 0.025em;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border: 1px solid transparent;
  position: relative;
  overflow: hidden;
  min-width: 100px;
  text-align: center;
  font-size: 0.875rem;
}

.action-btn-primary {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
}

.action-btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
  background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
}

.action-btn-secondary {
  background: linear-gradient(135deg, #be1e2d 0%, #9e1825 100%);
  color: white;
  border-color: #be1e2d;
  box-shadow: 0 4px 15px rgba(190, 30, 45, 0.3);
}

.action-btn-secondary:hover {
  background: linear-gradient(135deg, #9e1825 0%, #7e141e 100%);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(190, 30, 45, 0.4);
}

.action-btn-success {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}

.action-btn-success:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
  background: linear-gradient(135deg, #059669 0%, #047857 100%);
}

.action-btn-warning {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
}

.action-btn-warning:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
  background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
}

/* Enhanced File preview styling */
#fileContent {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border: 2px solid #e2e8f0;
  border-radius: 0.75rem;
  min-height: 500px;
  height: 100%;
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
}

#fileContent::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #be1e2d 0%, #ea580c 50%, #be1e2d 100%);
  border-radius: 0.75rem 0.75rem 0 0;
}

#fileContent embed,
#fileContent iframe {
  flex: 1;
  min-height: 500px;
}

.preview-section:not(.hidden) {
  display: flex !important;
  flex-direction: column;
  height: 100%;
}

.preview-section:not(.hidden) > div:first-child {
  flex-shrink: 0;
}

.preview-section:not(.hidden) #fileContent {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
}

.preview-section embed,
.preview-section iframe {
  width: 100% !important;
  height: 100% !important;
  min-height: 500px;
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
}

#fileContent img {
  max-width: 100%;
  height: auto;
  border-radius: 0.375rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

#fileContent embed {
  border: 1px solid #d1d5db;
  border-radius: 0.375rem;
}

#fileContent pre {
  background: #ffffff;
  padding: 1rem;
  border-radius: 0.375rem;
  border: 1px solid #e5e7eb;
  font-family: 'Courier New', monospace;
  line-height: 1.4;
}

/* Grid cols */
.grid-cols-5 {
  grid-template-columns: repeat(5, minmax(0, 1fr));
}

.grid-cols-4 {
  grid-template-columns: repeat(4, minmax(0, 1fr));
}

/* Responsive */
@media (max-width: 768px) {
  .compact-form .grid-cols-4,
  .compact-form .grid-cols-5 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.5rem;
  }
}

/* Main Content Styles */
.main-content-wrapper {
  display: flex;
  min-height: 100vh;
}

.main-content-area {
  flex: 1;
  background: #e7e8e9;
  padding: 20px;
}

    </style>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">
    <div class="flex flex-col min-h-screen">
        <div class="flex flex-col min-h-screen">
            <!-- Main Content Area -->
            <div class="main-content-wrapper">
                <!-- Main Content -->
                <div class="main-content-area bg-gray-50 p-6" style="width: 100%;">
                    <div class="max-w-full mx-auto">
                        <!-- File Upload Section -->
                        <div class="upload-section p-2 mb-2">
                            <div class="flex items-center justify-between gap-2">
                                <div class="flex items-center gap-2 flex-shrink-0">
                                    <button id="uploadBtn" class="upload-btn text-white text-xs flex items-center whitespace-nowrap">
                                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                        </svg>
                                        Upload
                                    </button>
                                    <input id="fileDisplay" type="text" value="No File Chosen" readonly class="upload-field px-2 py-1 border border-gray-200 rounded text-xs bg-white cursor-pointer focus:border-blue-500 focus:outline-none transition-all duration-200 flex-shrink-0" style="width: 150px;">
                                </div>
                                </div>
                            <p class="text-xs text-gray-600 mt-1 font-medium">Upload scanned document to autofill below form.</p>
                                </div>

                        <!-- Main Form Container -->
                        <div class="form-container">
                            <!-- Form Section -->
                            <div id="formSection" class="form-section bg-white rounded-lg shadow-sm p-2 overflow-hidden compact-form">
                                <!-- Personal Details Accordion -->
                                <div class="accordion-section" data-section="personal">
                                    <div class="accordion-header" onclick="toggleAccordion('personal')">
                                        <h3>
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                                    </svg>
                                            Personal Details
                                        </h3>
                                        <button class="accordion-toggle" type="button">
                                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                                    </svg>
                                                </button>
                                            </div>
                                    <div class="accordion-content expanded" id="personal-content">
                                        <div class="grid grid-cols-5 gap-2">
                                            <div class="form-field-container">
                                                <label>Name*</label>
                                                <input type="text" name="name" required>
                                        </div>
                                            <div class="form-field-container">
                                                <label>Phone Number*</label>
                                                <input type="tel" name="phone" required>
                                    </div>
                                            <div class="form-field-container">
                                                <label>Email*</label>
                                                <input type="email" name="email" required>
                                </div>
                                            <div class="form-field-container">
                                                <label>Address Line 1*</label>
                                                <input type="text" name="address1" required>
                            </div>
                                            <div class="form-field-container">
                                                <label>Address Line 2</label>
                                                <input type="text" name="address2">
                        </div>
                                            <div class="form-field-container">
                                                <label>Address Line 3</label>
                                                <input type="text" name="address3">
                            </div>
                                            <div class="form-field-container">
                                                <label>Select State*</label>
                                                <select name="state" required>
                                                    <option>Select State</option>
                                                </select>
                        </div>
                                            <div class="form-field-container">
                                                <label>Date of Birth*</label>
                                                <input type="text" name="dob" placeholder="DD/MM/YYYY" required>
                                                </div>
                                            <div class="form-field-container">
                                                <label>Gender*</label>
                                                <div class="flex items-center space-x-2 mt-2">
                                                    <label class="flex items-center">
                                                        <input type="radio" name="gender" value="male" checked class="mr-1">
                                                        <span class="text-xs">Male</span>
                                                    </label>
                                                    <label class="flex items-center">
                                                        <input type="radio" name="gender" value="female" class="mr-1">
                                                        <span class="text-xs">Female</span>
                                                    </label>
                                                </div>
                                                </div>
                                            <div class="form-field-container">
                                                <label class="flex items-center mt-6" style="white-space: nowrap; min-width: 0;">
                                                    <input type="checkbox" name="relocate" checked class="mr-1" style="flex-shrink: 0;">
                                                    <span class="text-xs">Willing to relocate</span>
                                                </label>
                                                </div>
                                                </div>
                                                </div>
                                                </div>

                                <!-- Additional Details Accordion -->
                                <div class="accordion-section" data-section="additional">
                                    <div class="accordion-header" onclick="toggleAccordion('additional')">
                                        <h3>
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                                                        </svg>
                                            Additional Details
                                        </h3>
                                        <button class="accordion-toggle" type="button">
                                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                                        </svg>
                                                    </button>
                                                </div>
                                    <div class="accordion-content collapsed" id="additional-content">
                                        <div class="grid grid-cols-5 gap-2">
                                            <div class="form-field-container">
                                                <label>Select Bank*</label>
                                                <select name="bank" required>
                                                    <option>Select Bank</option>
                                                </select>
                                                </div>
                                            <div class="form-field-container">
                                                <label>Account No.*</label>
                                                <input type="text" name="account" required>
                                                </div>
                                            <div class="form-field-container">
                                                <label>IFSC*</label>
                                                <input type="text" name="ifsc" required>
                                                </div>
                                            <div class="form-field-container">
                                                <label>Branch*</label>
                                                <input type="text" name="branch" required>
                                                </div>
                                            <div class="form-field-container">
                                                <label>Contact No.</label>
                                                <input type="tel" name="contact">
                                                </div>
                                            <div class="col-span-5 form-field-container">
                                                <label>Description</label>
                                                <textarea name="description" rows="2"></textarea>
                                                </div>
                                                </div>
                            </div>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div class="action-buttons">
                                    <button class="action-btn action-btn-primary">Preview</button>
                                    <button class="action-btn action-btn-success">Submit</button>
                                    <button class="action-btn action-btn-secondary">Cancel</button>
                                    <button class="action-btn action-btn-warning flex items-center" onclick="clearForm()">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                        Clear
                                    </button>
                </div>
            </div>

                            <!-- File Preview Section (Hidden by default) -->
                            <div id="previewSection" class="preview-section hidden bg-white rounded-lg shadow-sm p-2 overflow-hidden">
                                <div class="flex justify-between items-center mb-2 border-b border-gray-200 pb-1">
                                    <h3 class="text-base font-semibold text-gray-800">Uploaded File Preview</h3>
                                    <div class="flex space-x-2">
                                        <button class="p-2 text-gray-600 hover:text-gray-800">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                                </svg>
                                        </button>
                                        <button class="p-2 text-gray-600 hover:text-gray-800">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                            </svg>
                                        </button>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>

    <!-- Scripts -->
    <script>

        // File upload functionality
        const uploadBtn = document.getElementById('uploadBtn');
        const fileInput = document.getElementById('fileDisplay');
        const formSection = document.getElementById('formSection');
        const previewSection = document.getElementById('previewSection');

        // Create hidden file input
        const hiddenFileInput = document.createElement('input');
        hiddenFileInput.type = 'file';
        hiddenFileInput.accept = '.pdf,.jpg,.jpeg,.png,.doc,.docx';
        hiddenFileInput.style.display = 'none';
        document.body.appendChild(hiddenFileInput);

        // Handle upload button click
        if (uploadBtn) {
            uploadBtn.addEventListener('click', function(e) {
                e.preventDefault();
                hiddenFileInput.click();
            });
        }

        // Handle file selection
        hiddenFileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                // Update the display
                fileInput.value = file.name;
                
                // Show preview section
                previewSection.classList.remove('hidden');
                
                // Adjust form section width
                formSection.classList.add('compact');
                
                // Display file preview
                displayFilePreview(file);
                
                console.log('File uploaded:', file.name);
            }
        });

        // Function to display file preview
        function displayFilePreview(file) {
            const previewSection = document.getElementById('previewSection');
            
            if (!previewSection) return;
            
            // Clear previous content
            previewSection.innerHTML = `
                <div class="flex justify-between items-center mb-2 border-b border-gray-200 pb-1">
                    <h3 class="text-base font-semibold text-gray-800">File Preview: ${file.name}</h3>
                    <div class="flex space-x-2">
                        <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded" onclick="downloadFile()" title="Download">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </button>
                        <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded" onclick="closePreview()" title="Close Preview">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    </div>
                <div id="fileContent" class="bg-gray-100 p-4 rounded text-xs overflow-y-auto" style="height: calc(100vh - 450px); min-height: 500px;">
                    <div class="text-center text-gray-600">Loading file preview...</div>
                    </div>
            `;
            
            // Display file content based on type
            const fileContent = document.getElementById('fileContent');
            
            if (file.type.startsWith('image/')) {
                // Display image
                const img = document.createElement('img');
                img.src = URL.createObjectURL(file);
                img.className = 'max-w-full h-auto rounded';
                img.alt = file.name;
                fileContent.innerHTML = '';
                fileContent.appendChild(img);
            } else if (file.type === 'application/pdf') {
                // Display PDF
                const embed = document.createElement('embed');
                embed.src = URL.createObjectURL(file);
                embed.type = 'application/pdf';
                embed.className = 'w-full';
                embed.style.height = 'calc(100vh - 450px)';
                embed.style.minHeight = '500px';
                fileContent.innerHTML = '';
                fileContent.appendChild(embed);
            } else if (file.type.includes('text/') || file.type.includes('document')) {
                // Display text content
                const reader = new FileReader();
                reader.onload = function(e) {
                    const text = e.target.result;
                    fileContent.innerHTML = `<pre class="whitespace-pre-wrap text-xs">${text}</pre>`;
                };
                reader.readAsText(file);
            } else {
                // Generic file info
                fileContent.innerHTML = `
                    <div class="text-center">
                        <div class="text-lg mb-2">ðŸ“„</div>
                        <div class="font-semibold mb-2">${file.name}</div>
                        <div class="text-gray-600 mb-2">File Type: ${file.type || 'Unknown'}</div>
                        <div class="text-gray-600 mb-2">Size: ${(file.size / 1024).toFixed(2)} KB</div>
                </div>
            `;
            }
        }

        // Handle file removal (double click on file input)
        fileInput.addEventListener('dblclick', function() {
            // Reset to default state
            fileInput.value = 'No File Chosen';
            previewSection.classList.add('hidden');
            formSection.classList.remove('compact');
            
            // Clear hidden input
            hiddenFileInput.value = '';
        });

        // Also allow clicking on the file input to trigger file selection
        fileInput.addEventListener('click', function() {
            hiddenFileInput.click();
        });

        // Accordion functionality
        function toggleAccordion(sectionName) {
            const section = document.querySelector(`[data-section="${sectionName}"]`);
            const content = document.getElementById(`${sectionName}-content`);
            const toggle = section.querySelector('.accordion-toggle');
            
            if (content.classList.contains('expanded')) {
                // Collapse
                content.classList.remove('expanded');
                content.classList.add('collapsed');
                toggle.classList.remove('active');
            } else {
                // Expand
                content.classList.remove('collapsed');
                content.classList.add('expanded');
                toggle.classList.add('active');
            }
        }

        // Initialize accordion state
        document.addEventListener('DOMContentLoaded', function() {
            // Personal Details starts expanded, Additional Details starts collapsed
            const personalContent = document.getElementById('personal-content');
            const additionalContent = document.getElementById('additional-content');
            const additionalToggle = document.querySelector('[data-section="additional"] .accordion-toggle');
            
            
            // Attach live preview listeners to all form inputs
            const allFormInputs = document.querySelectorAll('#personal-content input, #personal-content select, #additional-content input, #additional-content select, #additional-content textarea');
            
            allFormInputs.forEach(input => {
                input.addEventListener('input', updateLivePreview);
                input.addEventListener('change', updateLivePreview);
            });
            
            if (personalContent) personalContent.classList.add('expanded');
            if (additionalContent) additionalContent.classList.add('collapsed');
            if (additionalToggle) additionalToggle.classList.remove('active');
        });

        // Helper functions for file preview
        window.downloadFile = function() {
            const fileInput = document.getElementById('fileDisplay');
            if (fileInput && fileInput.value !== 'No File Chosen') {
                const link = document.createElement('a');
                link.href = URL.createObjectURL(hiddenFileInput.files[0]);
                link.download = hiddenFileInput.files[0].name;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        };

        window.closePreview = function() {
            const previewSection = document.getElementById('previewSection');
            const formSection = document.getElementById('formSection');
            const fileInput = document.getElementById('fileDisplay');
            
            if (previewSection) {
                previewSection.classList.add('hidden');
            }
            if (formSection) {
                formSection.classList.remove('compact');
            }
            if (fileInput) {
                fileInput.value = 'No File Chosen';
            }
            
            // Clear hidden input
            if (hiddenFileInput) {
                hiddenFileInput.value = '';
            }
        };

        // Form submission functionality
        const submitBtn = document.querySelector('.action-btn-primary');
        
        if (submitBtn) {
            submitBtn.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Capture all form data
                const formData = captureFormData();
                
                // Display preview with captured data
                displayFormPreview(formData);
                
                // Show preview section and adjust layout
                showPreviewSection();
                
                // Initialize live preview with current data
                updateLivePreview();
            });
        }

        // Function to capture all form data
        function captureFormData() {
            const formData = {
                personal: {},
                additional: {}
            };
            
            // Capture Personal Details
            const personalInputs = document.querySelectorAll('#personal-content input, #personal-content select');
            personalInputs.forEach(input => {
                if (input.type === 'radio') {
                    if (input.checked) {
                        formData.personal[input.name] = input.value;
                    }
                } else if (input.type === 'checkbox') {
                    formData.personal[input.name] = input.checked ? 'Yes' : 'No';
            } else {
                    formData.personal[input.name] = input.value || '';
                }
            });
            
            // Capture Additional Details
            const additionalInputs = document.querySelectorAll('#additional-content input, #additional-content select, #additional-content textarea');
            additionalInputs.forEach(input => {
                formData.additional[input.name || input.id] = input.value || '';
            });
            
            return { formData };
        }

        // Function to display form preview
        function displayFormPreview(data) {
            const previewSection = document.getElementById('previewSection');
            
            if (!previewSection) return;
            
            const { formData } = data;
            
            // Create preview content
            previewSection.innerHTML = `
                <div class="flex justify-between items-center mb-2 border-b border-gray-200 pb-1">
                    <h3 class="text-base font-semibold text-gray-800">Form Data Preview</h3>
                    <div class="flex space-x-2">
                        <button class="p-2 text-gray-600 hover:text-gray-800" onclick="printPreview()" title="Print">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                                    </svg>
                                </button>
                        <button class="p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded" onclick="closePreview()" title="Close Preview">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                </div>
                <div class="bg-gray-100 p-4 rounded text-xs overflow-y-auto" style="height: calc(100vh - 450px); min-height: 500px;">
                    <!-- Personal Details Summary -->
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2 text-sm">Personal Details</h4>
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <div><strong>Name:</strong> <span id="preview-name" class="text-gray-600">${formData.personal.name || 'Not provided'}</span></div>
                            <div><strong>Email:</strong> <span id="preview-email" class="text-gray-600">${formData.personal.email || 'Not provided'}</span></div>
                            <div><strong>Phone Number:</strong> <span id="preview-phone" class="text-gray-600">${formData.personal.phone || 'Not provided'}</span></div>
                            <div><strong>Date of Birth:</strong> <span id="preview-dob" class="text-gray-600">${formData.personal.dob || 'Not provided'}</span></div>
                            <div><strong>Gender:</strong> <span id="preview-gender" class="text-gray-600">${formData.personal.gender || 'Not provided'}</span></div>
                            <div><strong>State:</strong> <span id="preview-state" class="text-gray-600">${formData.personal.state || 'Not provided'}</span></div>
                            <div><strong>Address Line 1:</strong> <span id="preview-address1" class="text-gray-600">${formData.personal.address1 || 'Not provided'}</span></div>
                            <div><strong>Address Line 2:</strong> <span id="preview-address2" class="text-gray-600">${formData.personal.address2 || 'Not provided'}</span></div>
                            <div><strong>Address Line 3:</strong> <span id="preview-address3" class="text-gray-600">${formData.personal.address3 || 'Not provided'}</span></div>
                            <div><strong>Willing to relocate:</strong> <span id="preview-relocate" class="text-gray-600">${formData.personal.relocate || 'Not provided'}</span></div>
                        </div>
                    </div>
                    
                    <!-- Additional Details Summary -->
                    <div class="border-t pt-4">
                        <h4 class="font-semibold text-gray-800 mb-2 text-sm">Additional Details</h4>
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <div><strong>Bank:</strong> <span id="preview-bank" class="text-gray-600">${formData.additional.bank || 'Not provided'}</span></div>
                            <div><strong>Account No.:</strong> <span id="preview-account" class="text-gray-600">${formData.additional.account || 'Not provided'}</span></div>
                            <div><strong>IFSC:</strong> <span id="preview-ifsc" class="text-gray-600">${formData.additional.ifsc || 'Not provided'}</span></div>
                            <div><strong>Branch:</strong> <span id="preview-branch" class="text-gray-600">${formData.additional.branch || 'Not provided'}</span></div>
                            <div><strong>Contact No.:</strong> <span id="preview-contact" class="text-gray-600">${formData.additional.contact || 'Not provided'}</span></div>
                        </div>
                        <div class="mt-2">
                            <strong>Description:</strong> 
                            <div id="preview-description" class="text-gray-600 mt-1 p-2 bg-white rounded border">
                                ${formData.additional.description || 'Not provided'}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Function to show preview section
        function showPreviewSection() {
            const previewSection = document.getElementById('previewSection');
            const formSection = document.getElementById('formSection');
            
            if (previewSection && formSection) {
                // Show preview section
                previewSection.classList.remove('hidden');
                
                // Make form section compact (50% width)
                formSection.classList.add('compact');
            }
        }

        // Helper function to update individual preview fields
        function updatePreviewField(fieldId, value) {
            const field = document.getElementById(fieldId);
            if (field) {
                field.textContent = value || 'Not provided';
            }
        }

        // Live preview update function
        function updateLivePreview() {
            const previewSection = document.getElementById('previewSection');
            
            // If preview is not visible, don't update
            if (previewSection.classList.contains('hidden')) return;
            
            // Capture current form data
            const { formData } = captureFormData();
            
            // Update Personal Details
            updatePreviewField('preview-name', formData.personal.name);
            updatePreviewField('preview-email', formData.personal.email);
            updatePreviewField('preview-phone', formData.personal.phone);
            updatePreviewField('preview-dob', formData.personal.dob);
            updatePreviewField('preview-gender', formData.personal.gender);
            updatePreviewField('preview-state', formData.personal.state);
            updatePreviewField('preview-address1', formData.personal.address1);
            updatePreviewField('preview-address2', formData.personal.address2);
            updatePreviewField('preview-address3', formData.personal.address3);
            updatePreviewField('preview-relocate', formData.personal.relocate);
            
            // Update Additional Details
            updatePreviewField('preview-bank', formData.additional.bank);
            updatePreviewField('preview-account', formData.additional.account);
            updatePreviewField('preview-ifsc', formData.additional.ifsc);
            updatePreviewField('preview-branch', formData.additional.branch);
            updatePreviewField('preview-contact', formData.additional.contact);
            updatePreviewField('preview-description', formData.additional.description);
        }

        // Clear form function
        function clearForm() {
            // Clear all text inputs, selects, and textareas
            const allInputs = document.querySelectorAll('#personal-content input, #personal-content select, #additional-content input, #additional-content select, #additional-content textarea');
            
            allInputs.forEach(input => {
                if (input.type === 'radio') {
                    // Reset radio buttons to default (first option checked)
                    if (input.value === 'male') {
                        input.checked = true;
                    } else {
                        input.checked = false;
                    }
                } else if (input.type === 'checkbox') {
                    // Reset checkbox to checked (willing to relocate)
                    if (input.name === 'relocate') {
                        input.checked = true;
                    } else {
                        input.checked = false;
                    }
                } else if (input.type === 'text' || input.type === 'email' || input.type === 'tel') {
                    // Clear text inputs
                    input.value = '';
                } else if (input.tagName === 'SELECT') {
                    // Reset select to first option
                    input.selectedIndex = 0;
                } else if (input.tagName === 'TEXTAREA') {
                    // Clear textarea
                    input.value = '';
                }
            });
            
            // Update live preview if it's visible
            updateLivePreview();
            
            // Show confirmation message
            alert('Form cleared successfully!');
        }

        // Print functionality
        window.printPreview = function() {
            const printContent = document.getElementById('previewSection').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>Form Data Preview</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .print-header { text-align: center; margin-bottom: 30px; }
                            .print-header h1 { color: #be1e2d; margin-bottom: 10px; }
                        </style>
                    </head>
                    <body>
                        <div class="print-header">
                            <h1>Department of Posts</h1>
                            <h2>Form Data Preview</h2>
                            <p>Generated on: ${new Date().toLocaleString()}</p>
                        </div>
                        ${printContent}
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        };
    </script>
</body>
</html>